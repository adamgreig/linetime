# Firmware Outline/To-Do

* Technical Debt
    * Remove firmware 18 GPS stuff like TIMELS
    * Remove all mention of TIM-TP. It wasn't meant to be. Alas.
    * Correctly use NAV-PVT and perhaps TIM-TIMEUTC to determine the
      top of the coming PPS pulse
    * Consider therefore moving away from week+tow representation
    * For example, use raw TIM2 CNT plus a 32 bit overflow counter for 64bit
      "time since boot" + log the corresponding PVT times
    * Tidy up queue system and split out from microSD so ethernet can use it
    * Fix mains RMS measurements

* Ethernet:
    * Read MAC address from ROM
    * LWIP to send TCP packets
    * Send the continuous ADC buffer every half-full interrupt,
      perhaps subsampled? and perhaps with a UTC timestamp for the start?
    * Send each cycle event (rms, freq, timestamp)
    * HTTP to u-Blox AssistNow Online and send to ublox because hey why not

* Battery:
    * ADC3 to monitor charge current and battery voltage
    * Cycle CE as required

* LCD:
    * Backlight PWM
    * SPI config/initialisation
    * TFT LCD peripheral
    * UI stuff...

* Sounder:
    * DAC to amp
    * Tone generation

* Touch screen controller:
    * Worry about this much later
    * SPI streaming touch events
